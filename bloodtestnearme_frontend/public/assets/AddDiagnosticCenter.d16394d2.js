var w=(_,g,a)=>new Promise((t,b)=>{var c=e=>{try{i(a.next(e))}catch(r){b(r)}},y=e=>{try{i(a.throw(e))}catch(r){b(r)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(c,y);i((a=a.apply(_,g)).next())});import{_ as C,r as x,$ as N,g as v,h as P,i as s,k as n,l as d,m as E,t as L,j as k,f,n as u,v as p,q as h}from"./vendor.f5c2a979.js";const V={class:"container mx-auto px-4 py-6"},S={class:"col-span-2 flex justify-end mt-2 space-x-3"},U={key:0,class:"text-green-600 mt-1"},q={__name:"AddDiagnosticCenter",setup(_){const g=x(),a=x(""),t=N({labName:"",address:"",phone:"",city:"",state:"",pincode:"",locationLink:"",website:""}),b={labName:[{required:!0,message:"Please enter Lab Name",trigger:"blur"}],address:[{required:!0,message:"Please enter Address",trigger:"blur"},{min:25,message:"Address must be at least 25 characters",trigger:"blur"}],phone:[{required:!0,message:"Please enter Phone Number",trigger:"blur"},{validator:(i,e,r)=>{const l=e.replace(/\D/g,"");l?/^[6-9]\d{0,9}$/.test(l)?l.length>10?r(new Error("Mobile number cannot exceed 10 digits.")):l.length<10?r(new Error("Mobile number must be 10 digits.")):r():r(new Error("Please enter a valid Indian mobile number.")):r(new Error("Please enter your mobile number."))},trigger:"blur"}],city:[{required:!0,message:"Please enter City",trigger:"blur"}],state:[{required:!0,message:"Please enter State",trigger:"blur"}],pincode:[{required:!0,message:"Please enter Pincode",trigger:"blur"},{pattern:/^[1-9][0-9]{5}$/,message:"Enter valid 6-digit pincode",trigger:"blur"}],locationLink:[{required:!0,message:"Please enter location link",trigger:"blur"},{validator:(i,e,r)=>{try{new URL(e),r()}catch(l){r(new Error("Enter valid URL"))}},trigger:"blur"}],website:[]},c=()=>{g.value.resetFields()},y=()=>{g.value.validate(i=>w(this,null,function*(){var e,r;if(!i){a.value="Please fill all required fields correctly.",console.log("Form validation failed");return}try{const l={diagnostic_center_name:t.labName,address:t.address,phone_number:t.phone,city:t.city,state:t.state,pincode:t.pincode,map_embed_link:t.locationLink,website:t.website,workflow_state:"Created"},m=yield fetch("/api/method/bloodtestnearme.api.diagnostic_center.create_diagnostic_center",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(o=>o.json());console.log("API Response:",m),((e=m.message)==null?void 0:e.message)==="Diagnostic Center created successfully"?(a.value=m.message.message,c()):a.value=((r=m.message)==null?void 0:r.message)||"Something went wrong. Please try again."}catch(l){console.error("Error:",l),a.value="Something went wrong. Please try again."}}))};return(i,e)=>{const r=f("el-form-item"),l=f("el-button"),m=f("el-form");return v(),P("div",null,[s("div",V,[e[10]||(e[10]=s("h2",{class:"text-3xl font-semibold mb-4 bold-test-color"}," Diagnostic Center Contact Information ",-1)),n(m,{ref_key:"formRef",ref:g,model:t,rules:b,"label-position":"top",onSubmit:E(y,["prevent"]),class:"grid grid-cols-2 gap-x-4 gap-y-3 bg-white p-3 rounded-lg shadow-sm border border-gray-200"},{default:d(()=>[n(r,{label:"Lab Name",prop:"labName"},{default:d(()=>[u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.labName=o),type:"text",placeholder:"Enter Lab Name",class:"w-full border border-gray-300 rounded-md px-3 py-2"},null,512),[[p,t.labName]])]),_:1}),n(r,{label:"Address",prop:"address"},{default:d(()=>[u(s("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.address=o),placeholder:"Enter Address",rows:"1",class:"w-full border border-gray-300 rounded-md px-3 py-2"},null,512),[[p,t.address]])]),_:1}),n(r,{label:"Phone Number",prop:"phone"},{default:d(()=>[u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.phone=o),type:"text",placeholder:"Enter Phone Number",class:"w-full border border-gray-300 rounded-md px-3 py-2"},null,512),[[p,t.phone]])]),_:1}),n(r,{label:"City",prop:"city"},{default:d(()=>[u(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.city=o),type:"text",placeholder:"Enter City",class:"w-full border border-gray-300 rounded-md px-3 py-2"},null,512),[[p,t.city]])]),_:1}),n(r,{label:"State",prop:"state"},{default:d(()=>[u(s("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.state=o),type:"text",placeholder:"Enter State",class:"w-full border border-gray-300 rounded-md px-3 py-1"},null,512),[[p,t.state]])]),_:1}),n(r,{label:"Pincode",prop:"pincode"},{default:d(()=>[u(s("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.pincode=o),type:"text",placeholder:"Enter Pincode",class:"w-full border border-gray-300 rounded-md px-3 py-1"},null,512),[[p,t.pincode]])]),_:1}),n(r,{label:"Location Link",prop:"locationLink"},{default:d(()=>[u(s("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>t.locationLink=o),type:"text",placeholder:"Paste location link",class:"w-full border border-gray-300 rounded-md px-3 py-2"},null,512),[[p,t.locationLink]])]),_:1}),n(r,{label:"Website",prop:"website"},{default:d(()=>[u(s("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>t.website=o),type:"text",placeholder:"Enter Website URL",class:"w-full border border-gray-300 rounded-md px-3 py-2"},null,512),[[p,t.website]])]),_:1}),s("div",S,[n(l,{type:"default",onClick:c},{default:d(()=>[...e[8]||(e[8]=[h("Cancel",-1)])]),_:1}),n(l,{type:"primary",onClick:y},{default:d(()=>[...e[9]||(e[9]=[h("Submit",-1)])]),_:1})])]),_:1},8,["model"]),a.value?(v(),P("p",U,L(a.value),1)):k("",!0)])])}}};var R=C(q,[["__scopeId","data-v-1d02cf28"]]);export{R as default};
